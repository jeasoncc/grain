---
inclusion: manual
---

# å‰ç«¯æ•°æ®æµè¯¦è§£

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°å‰ç«¯çš„åŒæ­¥å’Œå¼‚æ­¥æ•°æ®æµæ¶æ„ã€‚

> ğŸ“š **ç›¸å…³æ–‡æ¡£**ï¼š
> - `architecture.md` - æ ¸å¿ƒæ¶æ„è®¾è®¡å“²å­¦
> - `#data-flow-backend` - Rust åç«¯æ•°æ®æµ
> - `#data-flow-e2e` - ç«¯åˆ°ç«¯æ•°æ®æµ

---

## æ•°æ®æµæ¶æ„å›¾ï¼ˆåŒæ­¥ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Grain å‡½æ•°å¼æ•°æ®æµæ¶æ„ï¼ˆåŒæ­¥ï¼‰                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚     å¤–éƒ¨ä¸–ç•Œ     â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚                             â”‚                             â”‚
               â–¼                             â–¼                             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚    UI è¡¨å•       â”‚          â”‚    API å“åº”     â”‚          â”‚   æ–‡ä»¶å¯¼å…¥      â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                             â”‚                             â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚           Zod Schema                â”‚
                          â”‚          (è¿è¡Œæ—¶æ ¡éªŒ)                â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚                           â”‚
                          âŒ æ ¡éªŒå¤±è´¥                   âœ… æ ¡éªŒé€šè¿‡
                               â”‚                           â”‚
                               â–¼                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    é”™è¯¯å¤„ç†      â”‚         â”‚       Builder           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚   â†’ Object.freeze()     â”‚
                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                             â”‚
                                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Pure Function Pipeline (çº¯å‡½æ•°ç®¡é“)                        â”‚
â”‚                                                                                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚    â”‚  fn_1    â”‚â”€â”€â”€â”€â”€â–¶â”‚  fn_2    â”‚â”€â”€â”€â”€â”€â–¶â”‚  fn_3    â”‚â”€â”€â”€â”€â”€â–¶â”‚  fn_n    â”‚             â”‚
â”‚    â”‚ (è§£æ)   â”‚ pipe â”‚ (è½¬æ¢)   â”‚ pipe â”‚ (è®¡ç®—)   â”‚ pipe â”‚ (æ ¼å¼åŒ–) â”‚             â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                        â”‚                        â”‚
                    â–¼                                        â–¼                        â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚     Repo Functions      â”‚          â”‚    Store Functions      â”‚    â”‚ Export Functions  â”‚
     â”‚   (Tauri invoke è°ƒç”¨)    â”‚          â”‚     (çŠ¶æ€)              â”‚    â”‚    (å¯¼å‡º)         â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                                    â”‚
                  â–¼                                    â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚    Rust Backend         â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚     Zustand Store       â”‚
     â”‚    (SQLite æŒä¹…åŒ–)       â”‚  sync    â”‚      (å†…å­˜çŠ¶æ€)          â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚                   React Hooks (å“åº”å¼ç»‘å®š)            â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                                         â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚                   Components (UI ç»„ä»¶)               â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ å›åˆ°é¡¶éƒ¨
```

---

## å‰ç«¯å¼‚æ­¥æ•°æ®æµæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Grain å‰ç«¯å¼‚æ­¥æ•°æ®æµæ¶æ„                                      â”‚
â”‚                      ï¼ˆä½¿ç”¨ fp-ts TaskEither å¤„ç†å¼‚æ­¥æ“ä½œï¼‰                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   ç”¨æˆ·æ“ä½œè§¦å‘   â”‚
                                    â”‚  (ç‚¹å‡»/è¾“å…¥ç­‰)   â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚           Action å±‚                 â”‚
                          â”‚      (actions/*.action.ts)          â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TaskEither Pipeline (å¼‚æ­¥çº¯å‡½æ•°ç®¡é“)                              â”‚
â”‚                                                                                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚   TE.Do      â”‚â”€â”€â”€â–¶â”‚  TE.bind    â”‚â”€â”€â”€â–¶â”‚  TE.chain   â”‚â”€â”€â”€â–¶â”‚   TE.map    â”‚   â”‚
â”‚    â”‚  (å¼€å§‹ç®¡é“)   â”‚    â”‚ (ç»‘å®šå˜é‡)   â”‚    â”‚ (é“¾å¼è°ƒç”¨)   â”‚    â”‚  (è½¬æ¢ç»“æœ)  â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                    â”‚
â”‚    ç‰¹ç‚¹ï¼š                                                                          â”‚
â”‚    - TaskEither<AppError, T> å°è£…å¼‚æ­¥æ“ä½œ                                          â”‚
â”‚    - Left = é”™è¯¯ï¼ŒRight = æˆåŠŸ                                                     â”‚
â”‚    - é”™è¯¯è‡ªåŠ¨ä¼ é€’ï¼Œæ— éœ€ try-catch                                                   â”‚
â”‚    - æƒ°æ€§æ±‚å€¼ï¼Œè°ƒç”¨æ—¶æ‰æ‰§è¡Œ                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚                             â”‚                             â”‚
               â–¼                             â–¼                             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  Rust Backend   â”‚          â”‚   Local Store   â”‚          â”‚   File System   â”‚
      â”‚  (Tauri/Warp)   â”‚          â”‚   (Zustand)     â”‚          â”‚   (å¯¼å‡º/å¯¼å…¥)    â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                             â”‚                             â”‚
               â”‚ invoke/fetch                â”‚ setState                    â”‚ writeFile
               â”‚ (å¼‚æ­¥ IO)                   â”‚ (åŒæ­¥)                      â”‚ (å¼‚æ­¥ IO)
               â–¼                             â–¼                             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚    SQLite       â”‚          â”‚  Memory State   â”‚          â”‚   Local Files   â”‚
      â”‚  (æŒä¹…åŒ–å­˜å‚¨)    â”‚          â”‚   (è¿è¡Œæ—¶çŠ¶æ€)   â”‚          â”‚   (æ–‡ä»¶ç³»ç»Ÿ)    â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                             â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚         æ‰§è¡Œ TaskEither             â”‚
                          â”‚    pipe(task, TE.fold(...))()       â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚                           â”‚
                          âŒ Left (é”™è¯¯)              âœ… Right (æˆåŠŸ)
                               â”‚                           â”‚
                               â–¼                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   é”™è¯¯å¤„ç†       â”‚         â”‚    æ›´æ–° UI çŠ¶æ€         â”‚
                    â”‚  - Toast æç¤º   â”‚         â”‚  - Store æ›´æ–°           â”‚
                    â”‚  - æ—¥å¿—è®°å½•     â”‚         â”‚  - è§¦å‘é‡æ¸²æŸ“           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                             â”‚
                                                             â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚                   React Hooks (å“åº”å¼ç»‘å®š)            â”‚
                              â”‚                                                     â”‚
                              â”‚  useQuery / useMutation / useStore                  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                                         â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚                   Components (UI ç»„ä»¶)               â”‚
                              â”‚                                                     â”‚
                              â”‚  - Loading çŠ¶æ€                                     â”‚
                              â”‚  - Error çŠ¶æ€                                       â”‚
                              â”‚  - Success çŠ¶æ€                                     â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å¼‚æ­¥ Action ç¤ºä¾‹

```typescript
// actions/node/create-node.action.ts
import { pipe } from "fp-ts/function";
import * as TE from "fp-ts/TaskEither";
import { AppError } from "@/lib/error.types";

// å¼‚æ­¥ Action è¿”å› TaskEither
export const createNode = (
  params: CreateNodeParams
): TE.TaskEither<AppError, Node> =>
  pipe(
    // 1. æ ¡éªŒè¾“å…¥ï¼ˆåŒæ­¥çº¯å‡½æ•°ï¼‰
    TE.fromEither(validateNodeParams(params)),
    
    // 2. è½¬æ¢ä¸ºè¯·æ±‚å¯¹è±¡ï¼ˆåŒæ­¥çº¯å‡½æ•°ï¼‰
    TE.map(validated => toCreateNodeRequest(validated)),
    
    // 3. è°ƒç”¨ Rust åç«¯ï¼ˆå¼‚æ­¥ IOï¼‰
    TE.chain(request => 
      TE.tryCatch(
        () => invoke<Node>("create_node", { request }),
        (error) => AppError.fromUnknown(error)
      )
    ),
    
    // 4. æ›´æ–°æœ¬åœ°çŠ¶æ€ï¼ˆå‰¯ä½œç”¨ï¼‰
    TE.tap(node => 
      TE.fromIO(() => useNodeStore.getState().addNode(node))
    ),
    
    // 5. è®°å½•æ—¥å¿—ï¼ˆå‰¯ä½œç”¨ï¼‰
    TE.tap(node => 
      TE.fromIO(() => logger.success(`[Node] åˆ›å»ºæˆåŠŸ: ${node.id}`))
    )
  );

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
const handleCreate = async () => {
  const result = await pipe(
    createNode({ title: "æ–°èŠ‚ç‚¹", workspaceId }),
    TE.fold(
      (error) => T.of(showErrorToast(error.message)),
      (node) => T.of(showSuccessToast(`åˆ›å»ºæˆåŠŸ: ${node.title}`))
    )
  )();
};
```

---

## å¼‚æ­¥æ•°æ®æµç±»å‹ç­¾å

```typescript
// åŒæ­¥çº¯å‡½æ•°ï¼šInput â†’ Output
type SyncPureFn<A, B> = (a: A) => B;

// åŒæ­¥çº¯å‡½æ•°ï¼ˆå¯èƒ½å¤±è´¥ï¼‰ï¼šInput â†’ Either<Error, Output>
type SyncPureFnE<A, B> = (a: A) => E.Either<AppError, B>;

// å¼‚æ­¥çº¯å‡½æ•°ï¼šInput â†’ TaskEither<Error, Output>
type AsyncPureFn<A, B> = (a: A) => TE.TaskEither<AppError, B>;

// Action ç­¾åï¼ˆå¼‚æ­¥ï¼Œæœ‰å‰¯ä½œç”¨è¾¹ç•Œï¼‰
type Action<Params, Result> = (params: Params) => TE.TaskEither<AppError, Result>;
```

---

## å‰ç«¯å¼‚æ­¥æµç¨‹å¯¹ç…§è¡¨

| åŒæ­¥æµç¨‹ | å¼‚æ­¥æµç¨‹ | è¯´æ˜ |
|---------|---------|------|
| `pipe(a, fn1, fn2)` | `pipe(a, TE.map(fn1), TE.chain(fn2))` | å‡½æ•°ç»„åˆ |
| `Either<E, A>` | `TaskEither<E, A>` | é”™è¯¯å®¹å™¨ |
| `E.map` | `TE.map` | è½¬æ¢æˆåŠŸå€¼ |
| `E.chain` | `TE.chain` | é“¾å¼è°ƒç”¨ |
| `E.fold` | `TE.fold` | å¤„ç†ç»“æœ |
| ç«‹å³æ‰§è¡Œ | `()` è°ƒç”¨æ‰§è¡Œ | æƒ°æ€§æ±‚å€¼ |

---

## å¼‚æ­¥æ“ä½œåˆ†ç±»

| æ“ä½œç±»å‹ | è¿”å›ç±»å‹ | ç¤ºä¾‹ |
|---------|---------|------|
| åŒæ­¥çº¯å‡½æ•° | `A â†’ B` | `validateParams`, `transformNode` |
| åŒæ­¥å¯å¤±è´¥ | `A â†’ Either<E, B>` | `parseJson`, `validateSchema` |
| å¼‚æ­¥ IO | `A â†’ TaskEither<E, B>` | `invoke`, `fetch`, `readFile` |
| å‰¯ä½œç”¨ | `A â†’ IO<void>` | `setState`, `logger.info` |
