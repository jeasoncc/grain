# ğŸ” Tag è§¦å‘é—®é¢˜åˆ†æ

## â“ é—®é¢˜

ä¹‹å‰æ‰“ tag ä¼šè‡ªåŠ¨è§¦å‘æ„å»ºï¼Œç°åœ¨ä¸ä¼šè‡ªåŠ¨è§¦å‘äº†ã€‚

## ğŸ” æ ¹æœ¬åŸå› 

### æ—§å·¥ä½œæµçš„ Tag è§¦å‘é…ç½®

**ä½ç½®**: `apps/desktop/.github/workflows/release.yml`

```yaml
on:
  workflow_dispatch:
  push:
    branches:
      - release
    tags:
      - "v*.*.*"      # âœ… åŒ¹é… v0.1.0, v1.2.3 ç­‰
```

**è§¦å‘æ¡ä»¶**: 
- âœ… æ¨é€ `v*.*.*` æ ¼å¼çš„ tag (å¦‚ `v0.1.0`)
- âœ… æ¨é€åˆ° `release` åˆ†æ”¯

### æ–°å·¥ä½œæµçš„ Tag è§¦å‘é…ç½®

**ä½ç½®**: `.github/workflows/release-desktop.yml`

```yaml
on:
  workflow_dispatch:
  push:
    branches:
      - release
    tags:
      - "desktop-v*.*.*"  # âŒ åªåŒ¹é… desktop-v0.1.0
```

**è§¦å‘æ¡ä»¶**:
- âŒ æ¨é€ `desktop-v*.*.*` æ ¼å¼çš„ tag (å¦‚ `desktop-v0.1.0`)
- âœ… æ¨é€åˆ° `release` åˆ†æ”¯

## ğŸ¯ é—®é¢˜æ‰€åœ¨

### Tag æ ¼å¼ä¸åŒ¹é…

| ä½ ä½¿ç”¨çš„ Tag | æ—§å·¥ä½œæµ | æ–°å·¥ä½œæµ | æ˜¯å¦è§¦å‘ |
|-------------|----------|----------|----------|
| `v0.1.0` | âœ… åŒ¹é… `v*.*.*` | âŒ ä¸åŒ¹é… `desktop-v*.*.*` | âŒ ä¸è§¦å‘ |
| `v1.2.3` | âœ… åŒ¹é… `v*.*.*` | âŒ ä¸åŒ¹é… `desktop-v*.*.*` | âŒ ä¸è§¦å‘ |
| `desktop-v0.1.0` | âŒ ä¸åŒ¹é… `v*.*.*` | âœ… åŒ¹é… `desktop-v*.*.*` | âœ… è§¦å‘ |

**ç»“è®º**: æ–°å·¥ä½œæµè¦æ±‚ tag ä»¥ `desktop-v` å¼€å¤´ï¼Œè€Œä½ ä¹‹å‰ä½¿ç”¨çš„æ˜¯ `v` å¼€å¤´çš„ tagã€‚

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: ä¿®æ”¹å·¥ä½œæµä»¥åŒ¹é…æ—§çš„ Tag æ ¼å¼ï¼ˆæ¨èï¼‰

ä¿æŒä¸ä¹‹å‰ä¸€è‡´çš„ tag æ ¼å¼ `v*.*.*`ï¼š

```yaml
on:
  workflow_dispatch:
  push:
    branches:
      - release
    tags:
      - "v*.*.*"      # âœ… æ¢å¤æ—§æ ¼å¼
```

**ä¼˜ç‚¹**:
- âœ… ä¸ä¹‹å‰çš„ä½¿ç”¨ä¹ æƒ¯ä¸€è‡´
- âœ… ä¸éœ€è¦æ”¹å˜å·¥ä½œæµç¨‹
- âœ… å†å² tag æ ¼å¼ä¿æŒä¸€è‡´

**ç¼ºç‚¹**:
- âš ï¸ åœ¨ monorepo ä¸­ï¼Œæ— æ³•åŒºåˆ†æ¡Œé¢åº”ç”¨å’Œå®˜ç½‘çš„ tag

### æ–¹æ¡ˆ 2: åŒæ—¶æ”¯æŒä¸¤ç§æ ¼å¼

æ”¯æŒ `v*.*.*` å’Œ `desktop-v*.*.*` ä¸¤ç§æ ¼å¼ï¼š

```yaml
on:
  workflow_dispatch:
  push:
    branches:
      - release
    tags:
      - "v*.*.*"           # æ”¯æŒæ—§æ ¼å¼
      - "desktop-v*.*.*"   # æ”¯æŒæ–°æ ¼å¼
```

**ä¼˜ç‚¹**:
- âœ… å‘åå…¼å®¹
- âœ… æ”¯æŒæ–°çš„å‘½åè§„èŒƒ
- âœ… çµæ´»æ€§é«˜

**ç¼ºç‚¹**:
- âš ï¸ ä¸¤ç§æ ¼å¼å¯èƒ½é€ æˆæ··æ·†

### æ–¹æ¡ˆ 3: ä½¿ç”¨æ–°æ ¼å¼å¹¶æ›´æ–°ä½¿ç”¨ä¹ æƒ¯

ä½¿ç”¨ `desktop-v*.*.*` æ ¼å¼ï¼Œå¹¶æ›´æ–°ä½ çš„ tag åˆ›å»ºæ–¹å¼ï¼š

```bash
# æ—§æ–¹å¼
git tag v0.1.0

# æ–°æ–¹å¼
git tag desktop-v0.1.0
```

**ä¼˜ç‚¹**:
- âœ… åœ¨ monorepo ä¸­æ›´æ¸…æ™°
- âœ… å¯ä»¥åŒºåˆ†ä¸åŒåº”ç”¨çš„ç‰ˆæœ¬

**ç¼ºç‚¹**:
- âŒ éœ€è¦æ”¹å˜ä½¿ç”¨ä¹ æƒ¯
- âŒ ä¸å†å² tag æ ¼å¼ä¸ä¸€è‡´

## ğŸ“ æ¨èæ–¹æ¡ˆ

### æ¨èï¼šæ–¹æ¡ˆ 2ï¼ˆåŒæ—¶æ”¯æŒä¸¤ç§æ ¼å¼ï¼‰

è¿™æ ·æ—¢ä¿æŒå‘åå…¼å®¹ï¼Œåˆæ”¯æŒ monorepo çš„æœ€ä½³å®è·µã€‚

## ğŸ”§ ç«‹å³ä¿®å¤

### ä¿®æ”¹ `.github/workflows/release-desktop.yml`

```yaml
name: Release Desktop App

on:
  workflow_dispatch:
  push:
    branches:
      - release
    tags:
      - "v*.*.*"           # æ”¯æŒæ—§æ ¼å¼ (v0.1.0)
      - "desktop-v*.*.*"   # æ”¯æŒæ–°æ ¼å¼ (desktop-v0.1.0)

jobs:
  # ... å…¶ä½™é…ç½®ä¿æŒä¸å˜
```

## ğŸ“Š Tag æ ¼å¼å¯¹æ¯”

### å•ä¸€é¡¹ç›® (æ—§)

```
v0.1.0
v0.1.1
v0.2.0
v1.0.0
```

**ç‰¹ç‚¹**: ç®€å•ç›´æ¥

### Monorepo (æ–°)

```
desktop-v0.1.0    # æ¡Œé¢åº”ç”¨
desktop-v0.1.1
web-v0.1.0        # å®˜ç½‘
web-v0.1.1
```

**ç‰¹ç‚¹**: æ¸…æ™°åŒºåˆ†ä¸åŒåº”ç”¨

### å…¼å®¹æ–¹æ¡ˆ (æ¨è)

```
v0.1.0            # å‘åå…¼å®¹ï¼Œè§¦å‘æ¡Œé¢åº”ç”¨æ„å»º
desktop-v0.1.0    # æ˜ç¡®æŒ‡å®šæ¡Œé¢åº”ç”¨
web-v0.1.0        # å®˜ç½‘å‘å¸ƒ
```

**ç‰¹ç‚¹**: çµæ´»ä¸”å…¼å®¹

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### ä½¿ç”¨æ—§æ ¼å¼ (æ¨èç”¨äºæ¡Œé¢åº”ç”¨)

```bash
# 1. åˆ›å»º tag
git tag v0.1.0

# 2. æ¨é€ tag
git push origin v0.1.0

# 3. è‡ªåŠ¨è§¦å‘æ„å»º âœ…
```

### ä½¿ç”¨æ–°æ ¼å¼ (æ¨èç”¨äº monorepo)

```bash
# æ¡Œé¢åº”ç”¨
git tag desktop-v0.1.0
git push origin desktop-v0.1.0

# å®˜ç½‘
git tag web-v0.1.0
git push origin web-v0.1.0
```

## ğŸ” éªŒè¯ Tag è§¦å‘

### æ£€æŸ¥ç°æœ‰ tag

```bash
# æŸ¥çœ‹æ‰€æœ‰ tag
git tag -l

# æŸ¥çœ‹æœ€è¿‘çš„ tag
git describe --tags --abbrev=0
```

### æµ‹è¯•è§¦å‘

```bash
# 1. åˆ›å»ºæµ‹è¯• tag
git tag v0.1.0-test

# 2. æ¨é€
git push origin v0.1.0-test

# 3. æ£€æŸ¥ GitHub Actions
# GitHub â†’ Actions â†’ åº”è¯¥çœ‹åˆ°å·¥ä½œæµè¢«è§¦å‘
```

### åˆ é™¤æµ‹è¯• tag

```bash
# åˆ é™¤æœ¬åœ° tag
git tag -d v0.1.0-test

# åˆ é™¤è¿œç¨‹ tag
git push origin :refs/tags/v0.1.0-test
```

## ğŸ“‹ å·¥ä½œæµæ–‡ä»¶ä½ç½®é—®é¢˜

### å¦ä¸€ä¸ªé‡è¦é—®é¢˜

**æ—§å·¥ä½œæµä½ç½®**: `apps/desktop/.github/workflows/release.yml`
**æ–°å·¥ä½œæµä½ç½®**: `.github/workflows/release-desktop.yml`

**å…³é”®**: GitHub Actions åªè¯†åˆ«æ ¹ç›®å½•çš„ `.github/workflows/`ï¼

**å½±å“**:
- âŒ `apps/desktop/.github/workflows/release.yml` ä¸ä¼šè¢«è§¦å‘
- âœ… `.github/workflows/release-desktop.yml` ä¼šè¢«è§¦å‘

**è§£å†³**: 
- ä½¿ç”¨æ ¹ç›®å½•çš„å·¥ä½œæµæ–‡ä»¶
- åˆ é™¤æˆ–å¿½ç•¥å­ç›®å½•çš„å·¥ä½œæµæ–‡ä»¶

## âœ… å®Œæ•´ä¿®å¤æ­¥éª¤

### 1. æ›´æ–°å·¥ä½œæµæ–‡ä»¶

```bash
# ç¼–è¾‘ .github/workflows/release-desktop.yml
# ä¿®æ”¹ tags é…ç½®
```

### 2. åˆ é™¤æ—§å·¥ä½œæµï¼ˆå¯é€‰ï¼‰

```bash
# åˆ é™¤å­ç›®å½•çš„å·¥ä½œæµæ–‡ä»¶
rm -rf apps/desktop/.github
```

### 3. æäº¤æ›´æ”¹

```bash
git add .github/workflows/release-desktop.yml
git commit -m "fix: support both v*.*.* and desktop-v*.*.* tag formats"
git push
```

### 4. æµ‹è¯•

```bash
# åˆ›å»º tag
git tag v0.1.0-test

# æ¨é€
git push origin v0.1.0-test

# æ£€æŸ¥ GitHub Actions
```

## ğŸŠ æ€»ç»“

**é—®é¢˜æ ¹æº**:
1. ğŸ”´ Tag æ ¼å¼ä¸åŒ¹é… (`v*.*.*` vs `desktop-v*.*.*`)
2. ğŸŸ¡ å·¥ä½œæµæ–‡ä»¶ä½ç½® (å­ç›®å½• vs æ ¹ç›®å½•)

**è§£å†³æ–¹æ¡ˆ**:
1. âœ… ä¿®æ”¹å·¥ä½œæµæ”¯æŒä¸¤ç§ tag æ ¼å¼
2. âœ… ç¡®ä¿ä½¿ç”¨æ ¹ç›®å½•çš„å·¥ä½œæµæ–‡ä»¶
3. âœ… åˆ é™¤å­ç›®å½•çš„æ—§å·¥ä½œæµæ–‡ä»¶

**é¢„æœŸç»“æœ**:
- âœ… æ¨é€ `v0.1.0` æ ¼å¼çš„ tag ä¼šè§¦å‘æ„å»º
- âœ… æ¨é€ `desktop-v0.1.0` æ ¼å¼çš„ tag ä¹Ÿä¼šè§¦å‘æ„å»º
- âœ… ä¿æŒå‘åå…¼å®¹

---

**ä¿®å¤åï¼Œä½ çš„ tag è§¦å‘åº”è¯¥æ¢å¤æ­£å¸¸ï¼** ğŸš€
