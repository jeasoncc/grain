# Lint é—®é¢˜å¤„ç†è®¡åˆ’

> åŸºäº 2026-01-13 çš„ lint æŠ¥å‘Šåˆ†æ
> æ€»è®¡ï¼š518 ä¸ªæ–‡ä»¶ï¼Œ3930 ä¸ªé”™è¯¯ï¼Œ441 ä¸ªè­¦å‘Š

## ğŸ“Š é—®é¢˜æ¦‚è§ˆ

| ä¼˜å…ˆçº§ | ç±»åˆ« | é—®é¢˜æ•° | å½±å“èŒƒå›´ | é¢„è®¡å·¥æ—¶ |
|--------|------|--------|----------|----------|
| ğŸ”´ P0 | functional-immutability | 2209 | 228 æ–‡ä»¶ | 3-4 å‘¨ |
| ğŸŸ  P1 | check-file | 480 | 479 æ–‡ä»¶ | 1-2 å¤© |
| ğŸŸ¡ P2 | other (æœªåˆ†ç±») | 413 | 93 æ–‡ä»¶ | 1 å‘¨ |
| ğŸŸ¡ P2 | grain-functional | 366 | 87 æ–‡ä»¶ | 2 å‘¨ |
| ğŸŸ¡ P2 | functional-no-other-paradigm | 337 | 13 æ–‡ä»¶ | 1 å‘¨ |
| ğŸŸ¢ P3 | grain-architecture | 285 | 130 æ–‡ä»¶ | 2-3 å‘¨ |
| ğŸŸ¢ P3 | eslint-style | 200 | 74 æ–‡ä»¶ | 2-3 å¤© |
| ğŸŸ¢ P4 | eslint-errors | 74 | 38 æ–‡ä»¶ | 3-5 å¤© |
| ğŸŸ¢ P4 | typescript-types | 7 | 5 æ–‡ä»¶ | 1 å¤© |

**æ€»é¢„è®¡å·¥æ—¶**: 10-14 å‘¨ï¼ˆçº¦ 2.5-3.5 ä¸ªæœˆï¼‰

---

## ğŸ¯ é˜¶æ®µåˆ’åˆ†

### é˜¶æ®µ 0ï¼šå‡†å¤‡å·¥ä½œï¼ˆ1 å¤©ï¼‰

**ç›®æ ‡**: å»ºç«‹å·¥ä½œæµç¨‹å’Œè¿½è¸ªæœºåˆ¶

- [x] ç”Ÿæˆåˆ†ç±» lint æŠ¥å‘Š
- [x] åˆ¶å®šé‡æ„è®¡åˆ’
- [x] å»ºç«‹è¿›åº¦è¿½è¸ªæ–‡æ¡£
- [ ] è®¾ç½® Git åˆ†æ”¯ç­–ç•¥ï¼ˆæ¯ä¸ªé˜¶æ®µç‹¬ç«‹åˆ†æ”¯ï¼‰
- [ ] ç†Ÿæ‚‰æŠ¥å‘Šç»“æ„ï¼Œè¯†åˆ«é«˜é¢‘é—®é¢˜æ¨¡å¼

**äº§å‡º**:
- âœ… `lint-reports/summary.md` - æ€»ç»“æŠ¥å‘Š
- âœ… `lint-reports/REFACTORING-PLAN.md` - é‡æ„è®¡åˆ’
- âœ… `lint-reports/progress.md` - è¿›åº¦è¿½è¸ªæ–‡æ¡£

---

### é˜¶æ®µ 1ï¼šå¿«é€Ÿèƒœåˆ©ï¼ˆ1-2 å‘¨ï¼‰

**ç›®æ ‡**: å¿«é€Ÿè§£å†³å¯è‡ªåŠ¨åŒ–çš„é—®é¢˜ï¼Œå»ºç«‹ä¿¡å¿ƒ

#### 1.1 TypeScript ç±»å‹é—®é¢˜ (typescript-types: 7 ä¸ª) - ä¼˜å…ˆå¤„ç†

**ç­–ç•¥**: æ‰‹åŠ¨ä¿®å¤ï¼ˆæ•°é‡æœ€å°‘ï¼Œå…ˆå»ºç«‹ä¿¡å¿ƒï¼‰

**é—®é¢˜ç±»å‹**:
- `@typescript-eslint/no-explicit-any` - ç§»é™¤ any ç±»å‹
- `@typescript-eslint/no-unsafe-*` - ä¿®å¤ä¸å®‰å…¨çš„ç±»å‹æ“ä½œ

**æ­¥éª¤**:
1. æ‰“å¼€ `lint-reports/typescript-types.md`
2. é€ä¸ªæ–‡ä»¶æ£€æŸ¥ï¼ˆåªæœ‰ 5 ä¸ªæ–‡ä»¶ï¼‰
3. ä¿®å¤ç¬¬ 1 ä¸ªæ–‡ä»¶ â†’ æäº¤
4. ä¿®å¤ç¬¬ 2 ä¸ªæ–‡ä»¶ â†’ æäº¤
5. ä¿®å¤ç¬¬ 3 ä¸ªæ–‡ä»¶ â†’ æäº¤
6. ä¿®å¤ç¬¬ 4 ä¸ªæ–‡ä»¶ â†’ æäº¤
7. ä¿®å¤ç¬¬ 5 ä¸ªæ–‡ä»¶ â†’ æäº¤
8. éªŒè¯ç±»å‹å®‰å…¨

**é¢„è®¡**: 5 ä¸ªæ–‡ä»¶ = 5 ä¸ªæäº¤ï¼Œ1-2 å°æ—¶

---

#### 1.2 ä»£ç é£æ ¼ (eslint-style: 200 ä¸ª)

**ç­–ç•¥**: ä½¿ç”¨ ESLint è‡ªåŠ¨ä¿®å¤

```bash
cd apps/desktop
npx eslint --fix 'src/**/*.{ts,tsx}'
```

**é—®é¢˜ç±»å‹**:
- `arrow-body-style` - ç®­å¤´å‡½æ•°ä½“é£æ ¼
- `prefer-arrow-callback` - ä¼˜å…ˆä½¿ç”¨ç®­å¤´å‡½æ•°
- `prefer-const` - ä¼˜å…ˆä½¿ç”¨ const
- `object-shorthand` - å¯¹è±¡ç®€å†™

**æ­¥éª¤**:
1. è¿è¡Œ `npx eslint --fix 'src/**/*.{ts,tsx}'`
2. æ£€æŸ¥ git diffï¼ŒæŒ‰æ–‡ä»¶æŸ¥çœ‹ä¿®æ”¹
3. é€ä¸ªæ–‡ä»¶æäº¤ï¼š
   ```bash
   git add src/path/to/file1.ts
   git commit -m "style: ä¿®å¤ file1.ts çš„ä»£ç é£æ ¼"
   
   git add src/path/to/file2.ts
   git commit -m "style: ä¿®å¤ file2.ts çš„ä»£ç é£æ ¼"
   
   # ... é‡å¤ç›´åˆ°æ‰€æœ‰æ–‡ä»¶æäº¤å®Œæˆ
   ```
4. è¿è¡Œæµ‹è¯•ï¼š`npm test`

**é¢„è®¡**: 74 ä¸ªæ–‡ä»¶ = 74 ä¸ªæäº¤ï¼Œ1-2 å°æ—¶

---

#### 1.3 æ–‡ä»¶å‘½åè§„èŒƒ (check-file: 480 ä¸ª)

**ç­–ç•¥**: æ‰‹åŠ¨é‡å‘½åï¼Œåˆ†æ‰¹å¤„ç†

**é—®é¢˜æ¨¡å¼åˆ†æ**:
éœ€è¦å…ˆæŸ¥çœ‹ `lint-reports/check-file.md` äº†è§£å…·ä½“çš„å‘½åé—®é¢˜æ¨¡å¼ã€‚

**æ­¥éª¤**:
1. åˆ†ææŠ¥å‘Šï¼ŒæŒ‰ç›®å½•åˆ†ç»„ï¼ˆflows/, pipes/, hooks/ ç­‰ï¼‰
2. æ¯æ¬¡å¤„ç†ä¸€ä¸ªæ–‡ä»¶ï¼š
   ```bash
   # é‡å‘½åæ–‡ä»¶
   git mv old-name.ts new-name.ts
   
   # æ›´æ–° importï¼ˆä½¿ç”¨ IDE è‡ªåŠ¨é‡æ„ï¼‰
   # å¦‚æœ IDE æ²¡æœ‰è‡ªåŠ¨æ›´æ–°ï¼Œæ‰‹åŠ¨æŸ¥æ‰¾æ›¿æ¢
   
   # ç«‹å³æäº¤
   git commit -m "refactor: é‡å‘½å old-name.ts ä¸º new-name.ts"
   
   # ç»§ç»­ä¸‹ä¸€ä¸ªæ–‡ä»¶
   ```
3. æ¯é‡å‘½åä¸€ä¸ªæ–‡ä»¶å°±è¿è¡Œä¸€æ¬¡æµ‹è¯•ï¼ˆå¯é€‰ï¼Œå…³é”®æ–‡ä»¶å¿…é¡»æµ‹è¯•ï¼‰

**åˆ†æ‰¹è®¡åˆ’**:
- ç¬¬ 1-2 å¤©ï¼šflows/ ç›®å½•ï¼ˆçº¦ 50 ä¸ªæ–‡ä»¶ = 50 ä¸ªæäº¤ï¼‰
- ç¬¬ 3-4 å¤©ï¼špipes/ ç›®å½•ï¼ˆçº¦ 50 ä¸ªæ–‡ä»¶ = 50 ä¸ªæäº¤ï¼‰
- ç¬¬ 5-6 å¤©ï¼šhooks/ ç›®å½•ï¼ˆçº¦ 50 ä¸ªæ–‡ä»¶ = 50 ä¸ªæäº¤ï¼‰
- ç¬¬ 7 å¤©ï¼šio/ ç›®å½•ï¼ˆçº¦ 50 ä¸ªæ–‡ä»¶ = 50 ä¸ªæäº¤ï¼‰
- åç»­ï¼šå…¶ä»–ç›®å½•ï¼ˆçº¦ 280 ä¸ªæ–‡ä»¶ = 280 ä¸ªæäº¤ï¼‰

**é¢„è®¡**: 480 ä¸ªæ–‡ä»¶ = 480 ä¸ªæäº¤ï¼Œ5-7 å¤©

**æ³¨æ„äº‹é¡¹**:
- âš ï¸ æ¯ä¸ªæ–‡ä»¶é‡å‘½ååç«‹å³æäº¤
- ä½¿ç”¨ `git mv` ä¿ç•™æ–‡ä»¶å†å²
- ä½¿ç”¨ IDE çš„"é‡å‘½åç¬¦å·"åŠŸèƒ½è‡ªåŠ¨æ›´æ–°å¼•ç”¨
- å¦‚æœæŸä¸ªé‡å‘½åå¯¼è‡´é—®é¢˜ï¼Œå¯ä»¥ç²¾ç¡®å›æ»šé‚£ä¸€ä¸ªæäº¤

---

### é˜¶æ®µ 2ï¼šæ ¸å¿ƒæ¶æ„é—®é¢˜ï¼ˆ4-6 å‘¨ï¼‰

**ç›®æ ‡**: è§£å†³å‡½æ•°å¼ç¼–ç¨‹å’Œæ¶æ„å±‚é¢çš„æ ¸å¿ƒé—®é¢˜

#### 2.1 ä¸å¯å˜æ€§é—®é¢˜ (functional-immutability: 2209 ä¸ª) ğŸ”´

**è¿™æ˜¯æœ€å¤§çš„æŒ‘æˆ˜ï¼**

**é—®é¢˜ç±»å‹**:
- `functional/immutable-data` - ç›´æ¥ä¿®æ”¹å¯¹è±¡/æ•°ç»„
- `functional/prefer-readonly-type` - ç¼ºå°‘ readonly ä¿®é¥°ç¬¦
- `functional/no-let` - ä½¿ç”¨ let è€Œé const
- `functional/prefer-tacit` - å¯ä»¥ä½¿ç”¨ point-free é£æ ¼

**ç­–ç•¥**: åˆ†å±‚å¤„ç†

##### 2.1.1 å·¥å…·å±‚ (utils/) - 1 å‘¨
- æœ€å®¹æ˜“æ”¹é€ ï¼Œçº¯å‡½æ•°å±…å¤š
- ä½¿ç”¨ Immer æˆ– es-toolkit çš„ä¸å¯å˜å·¥å…·
- æ·»åŠ  readonly ç±»å‹ä¿®é¥°ç¬¦
- **æ¯ä¸ªæ–‡ä»¶ä¸€ä¸ªæäº¤**

##### 2.1.2 ç®¡é“å±‚ (pipes/) - 2 å‘¨
- æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œéœ€è¦ä»”ç»†æµ‹è¯•
- ç¡®ä¿æ‰€æœ‰æ•°æ®è½¬æ¢éƒ½æ˜¯çº¯å‡½æ•°
- ä½¿ç”¨ fp-ts çš„ pipe ç»„åˆ
- **æ¯ä¸ªæ–‡ä»¶ä¸€ä¸ªæäº¤ï¼Œä¿®æ”¹åç«‹å³æµ‹è¯•**

##### 2.1.3 IO å±‚ (io/) - 1 å‘¨
- IO æ“ä½œæœ¬èº«æœ‰å‰¯ä½œç”¨ï¼Œä½†è¦ç¡®ä¿æ•°æ®ä¸å¯å˜
- ä½¿ç”¨ TaskEither åŒ…è£…å¼‚æ­¥æ“ä½œ
- **æ¯ä¸ªæ–‡ä»¶ä¸€ä¸ªæäº¤**

##### 2.1.4 æµç¨‹å±‚ (flows/) - 1-2 å‘¨
- ç»„åˆå±‚ï¼Œç¡®ä¿ä¸ä¿®æ”¹ä¼ å…¥çš„æ•°æ®
- ä½¿ç”¨ Immer çš„ produce åˆ›å»ºæ–°å¯¹è±¡
- **æ¯ä¸ªæ–‡ä»¶ä¸€ä¸ªæäº¤ï¼Œä¿®æ”¹åå¿…é¡»æµ‹è¯•**

**ç¤ºä¾‹é‡æ„**:

```typescript
// âŒ ä¹‹å‰ï¼šç›´æ¥ä¿®æ”¹
function updateNode(node: Node, updates: Partial<Node>) {
  Object.assign(node, updates); // ç›´æ¥ä¿®æ”¹
  return node;
}

// âœ… ä¹‹åï¼šä¸å¯å˜æ›´æ–°
function updateNode(node: Readonly<Node>, updates: Partial<Node>): Node {
  return { ...node, ...updates }; // åˆ›å»ºæ–°å¯¹è±¡
}

// æˆ–ä½¿ç”¨ Immer
import { produce } from 'immer';

function updateNode(node: Readonly<Node>, updates: Partial<Node>): Node {
  return produce(node, draft => {
    Object.assign(draft, updates);
  });
}
```

---

#### 2.2 é¢å‘å¯¹è±¡èŒƒå¼æ¸…ç† (functional-no-other-paradigm: 337 ä¸ª)

**é—®é¢˜ç±»å‹**:
- `functional/no-this-expressions` - ä½¿ç”¨ thisï¼ˆç±»æ–¹æ³•ï¼‰
- `functional/no-classes` - ä½¿ç”¨ç±»
- `functional/no-class-inheritance` - ç±»ç»§æ‰¿

**ç­–ç•¥**: å°†ç±»é‡æ„ä¸ºçº¯å‡½æ•°

**é‡ç‚¹æ–‡ä»¶** (æ ¹æ®æŠ¥å‘Šï¼Œä¸»è¦é›†ä¸­åœ¨ 13 ä¸ªæ–‡ä»¶):
- `backup.flow.ts` - å¤‡ä»½æµç¨‹ï¼ˆå¯èƒ½ä½¿ç”¨äº†ç±»ï¼‰
- å…¶ä»–éœ€è¦æŸ¥çœ‹ `functional-no-other-paradigm.md`

**ç¤ºä¾‹é‡æ„**:

```typescript
// âŒ ä¹‹å‰ï¼šä½¿ç”¨ç±»
class BackupManager {
  private config: BackupConfig;
  
  constructor(config: BackupConfig) {
    this.config = config;
  }
  
  backup() {
    // ...
  }
}

// âœ… ä¹‹åï¼šçº¯å‡½æ•° + é—­åŒ…
type BackupManager = {
  backup: () => TaskEither<Error, void>;
};

function createBackupManager(config: Readonly<BackupConfig>): BackupManager {
  return {
    backup: () => pipe(
      // çº¯å‡½æ•°ç»„åˆ
    ),
  };
}
```

---

#### 2.3 Grain å‡½æ•°å¼è§„èŒƒ (grain-functional: 366 ä¸ª)

**é—®é¢˜ç±»å‹**:
- `grain/no-mutation` - å˜é‡é‡æ–°èµ‹å€¼
- `grain/no-try-catch` - ä½¿ç”¨ try-catchï¼ˆåº”è¯¥ç”¨ TaskEitherï¼‰
- `grain/no-throw` - æŠ›å‡ºå¼‚å¸¸
- `grain/no-async-outside-io` - åœ¨é IO å±‚ä½¿ç”¨ async
- `grain/fp-ts-patterns` - ä¸ç¬¦åˆ fp-ts æ¨¡å¼

**ç­–ç•¥**: æŒ‰å±‚çº§é‡æ„

##### 2.3.1 pipes/ å±‚ - 1 å‘¨
- ç§»é™¤æ‰€æœ‰ async/awaitï¼ˆåº”è¯¥æ˜¯åŒæ­¥çº¯å‡½æ•°ï¼‰
- ç§»é™¤ try-catchï¼Œä½¿ç”¨ Either å¤„ç†é”™è¯¯
- ç¡®ä¿æ— å‰¯ä½œç”¨

##### 2.3.2 flows/ å±‚ - 1 å‘¨
- ä½¿ç”¨ TaskEither æ›¿ä»£ try-catch
- ä½¿ç”¨ pipe ç»„åˆå‡½æ•°
- ç¡®ä¿é”™è¯¯å¤„ç†ä¸€è‡´

**ç¤ºä¾‹é‡æ„**:

```typescript
// âŒ ä¹‹å‰ï¼šä½¿ç”¨ try-catch
async function loadWorkspace(id: string) {
  try {
    const data = await api.getWorkspace(id);
    return data;
  } catch (error) {
    console.error(error);
    throw error;
  }
}

// âœ… ä¹‹åï¼šä½¿ç”¨ TaskEither
function loadWorkspace(id: string): TaskEither<Error, Workspace> {
  return pipe(
    TE.tryCatch(
      () => api.getWorkspace(id),
      (error) => new Error(`Failed to load workspace: ${error}`)
    )
  );
}
```

---

### é˜¶æ®µ 3ï¼šæ¶æ„é‡æ„ï¼ˆ2-3 å‘¨ï¼‰

**ç›®æ ‡**: ä¿®å¤æ¶æ„å±‚çº§ä¾èµ–é—®é¢˜

#### 3.1 æ¶æ„ä¾èµ– (grain-architecture: 285 ä¸ª)

**é—®é¢˜ç±»å‹**:
- `grain/layer-dependencies` - è¿åå±‚çº§ä¾èµ–è§„åˆ™
- `grain/file-location` - æ–‡ä»¶ä½ç½®ä¸æ­£ç¡®
- `grain/no-store-in-views` - views ç›´æ¥ä½¿ç”¨ store
- `grain/no-side-effects-in-pipes` - pipes æœ‰å‰¯ä½œç”¨
- `grain/no-react-in-pure-layers` - çº¯å‡½æ•°å±‚ä½¿ç”¨ React

**ç­–ç•¥**: æŒ‰ä¾èµ–è§„åˆ™é‡æ„

##### 3.1.1 åˆ†æä¾èµ–è¿è§„ - 2 å¤©
1. è¯»å– `grain-architecture.md`
2. ç»˜åˆ¶å½“å‰ä¾èµ–å›¾
3. è¯†åˆ«éœ€è¦ç§»åŠ¨çš„æ–‡ä»¶å’Œå‡½æ•°

##### 3.1.2 é‡æ„ views/ - 3 å¤©
- ç§»é™¤ç›´æ¥çš„ store è®¿é—®
- é€šè¿‡ hooks è®¿é—®çŠ¶æ€
- ç§»é™¤ä¸šåŠ¡é€»è¾‘åˆ° flows/

##### 3.1.3 é‡æ„ pipes/ - 5 å¤©
- ç§»é™¤æ‰€æœ‰å‰¯ä½œç”¨ï¼ˆIOã€çŠ¶æ€ä¿®æ”¹ï¼‰
- ç¡®ä¿çº¯å‡½æ•°ç‰¹æ€§
- å°†å‰¯ä½œç”¨ç§»åˆ° flows/

##### 3.1.4 é‡æ„ hooks/ - 3 å¤©
- ç¡®ä¿åªä¾èµ– flows/, state/, types/
- ç§»é™¤å¯¹ io/ çš„ç›´æ¥ä¾èµ–

**ç¤ºä¾‹é‡æ„**:

```typescript
// âŒ ä¹‹å‰ï¼šview ç›´æ¥ä½¿ç”¨ store
function NodeView() {
  const nodes = useNodeStore(state => state.nodes); // ç›´æ¥è®¿é—® store
  // ...
}

// âœ… ä¹‹åï¼šé€šè¿‡ hook è®¿é—®
function NodeView() {
  const nodes = useNodes(); // hook å°è£…äº† store è®¿é—®
  // ...
}

// hooks/use-nodes.ts
export function useNodes() {
  return useNodeStore(state => state.nodes);
}
```

---

### é˜¶æ®µ 4ï¼šæ¸…ç†å’Œä¼˜åŒ–ï¼ˆ1-2 å‘¨ï¼‰

**ç›®æ ‡**: å¤„ç†å‰©ä½™é—®é¢˜å’Œä¼˜åŒ–

#### 4.1 ESLint é”™è¯¯ (eslint-errors: 74 ä¸ª)

**é—®é¢˜ç±»å‹**:
- `no-unused-vars` - æœªä½¿ç”¨çš„å˜é‡
- `no-unreachable` - ä¸å¯è¾¾ä»£ç 
- `no-constant-condition` - å¸¸é‡æ¡ä»¶

**ç­–ç•¥**: é€ä¸ªä¿®å¤

#### 4.2 æœªåˆ†ç±»é—®é¢˜ (other: 413 ä¸ª)

**ç­–ç•¥**: 
1. åˆ†æ `other.md`ï¼Œè¯†åˆ«è§„åˆ™ç±»å‹
2. æ›´æ–° `categorize-lint-report.js` æ·»åŠ æ–°ç±»åˆ«
3. é‡æ–°ç”ŸæˆæŠ¥å‘Š
4. æŒ‰æ–°ç±»åˆ«å¤„ç†

---

## ğŸ”§ æ‰‹å·¥é‡æ„æŠ€å·§

### ä½¿ç”¨ IDE åŠŸèƒ½

**VS Code / Kiro**:
- `F2` - é‡å‘½åç¬¦å·ï¼ˆè‡ªåŠ¨æ›´æ–°æ‰€æœ‰å¼•ç”¨ï¼‰
- `Ctrl+Shift+H` - å…¨å±€æŸ¥æ‰¾æ›¿æ¢
- `Ctrl+.` - å¿«é€Ÿä¿®å¤ï¼ˆESLint è‡ªåŠ¨ä¿®å¤ï¼‰
- `Ctrl+Shift+P` â†’ "Organize Imports" - æ•´ç†å¯¼å…¥

**é‡å‘½åæ–‡ä»¶**:
1. åœ¨æ–‡ä»¶æ ‘ä¸­å³é”® â†’ Rename
2. IDE ä¼šè‡ªåŠ¨æ›´æ–°æ‰€æœ‰ import è¯­å¥
3. å¦‚æœæ²¡æœ‰è‡ªåŠ¨æ›´æ–°ï¼Œä½¿ç”¨å…¨å±€æŸ¥æ‰¾æ›¿æ¢

### æ‰¹é‡å¤„ç†æ¨¡å¼

**æ¨¡å¼ 1: åŒç±»é—®é¢˜æ‰¹é‡å¤„ç†**
```bash
# 1. æ‰¾å‡ºæ‰€æœ‰åŒç±»é—®é¢˜
grep "specific-rule" lint-reports/category.md

# 2. åœ¨ IDE ä¸­æ‰“å¼€æ‰€æœ‰ç›¸å…³æ–‡ä»¶
# 3. é€ä¸ªä¿®å¤ï¼Œä½¿ç”¨ç›¸åŒçš„æ¨¡å¼
# 4. æ¯ä¿®å¤ 5-10 ä¸ªæ–‡ä»¶å°±æäº¤ä¸€æ¬¡
```

**æ¨¡å¼ 2: å•æ–‡ä»¶å¤šé—®é¢˜å¤„ç†**
```bash
# 1. é€‰æ‹©ä¸€ä¸ªé—®é¢˜æœ€å¤šçš„æ–‡ä»¶
# 2. ä¸€æ¬¡æ€§ä¿®å¤è¯¥æ–‡ä»¶çš„æ‰€æœ‰é—®é¢˜
# 3. è¿è¡Œæµ‹è¯•ç¡®ä¿åŠŸèƒ½æ­£å¸¸
# 4. æäº¤
```

### Git å·¥ä½œæµ

**åˆ†æ”¯ç­–ç•¥**:
```bash
# ä¸»åˆ†æ”¯
main

# é‡æ„åˆ†æ”¯
refactor/phase-1-quick-wins
refactor/phase-2-immutability
refactor/phase-3-architecture
```

**æäº¤è§„èŒƒ**:
```bash
# ç±»å‹å®‰å…¨
git commit -m "fix: ä¿®å¤ [æ–‡ä»¶å] çš„ç±»å‹å®‰å…¨é—®é¢˜"

# ä»£ç é£æ ¼
git commit -m "style: ä¿®å¤ä»£ç é£æ ¼é—®é¢˜"

# æ–‡ä»¶é‡å‘½å
git commit -m "refactor: é‡å‘½å [ç›®å½•] æ–‡ä»¶ä»¥ç¬¦åˆå‘½åè§„èŒƒ"

# ä¸å¯å˜æ€§
git commit -m "refactor: å°† [æ–‡ä»¶å] æ”¹ä¸ºä¸å¯å˜æ¨¡å¼"

# æ¶æ„è°ƒæ•´
git commit -m "refactor: ä¿®å¤ [æ–‡ä»¶å] çš„å±‚çº§ä¾èµ–é—®é¢˜"
```

**å°æ­¥æäº¤åŸåˆ™**:
- âš ï¸ **æ¯ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶å°±æäº¤ä¸€æ¬¡** - è¿™æ˜¯æœ€é‡è¦çš„åŸåˆ™ï¼
- æ¯ä¸ªæäº¤åªä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶
- æäº¤ä¿¡æ¯æ¸…æ™°æè¿°ä¿®æ”¹å†…å®¹ï¼ˆåŒ…å«æ–‡ä»¶åï¼‰
- ä¾¿äºå‡ºé—®é¢˜æ—¶ç²¾ç¡®å›æ»šåˆ°ä»»ä½•ä¸€ä¸ªæ–‡ä»¶çš„ä¿®æ”¹å‰çŠ¶æ€
- æäº¤å†å²æ¸…æ™°ï¼Œæ˜“äºè¿½è¸ªæ¯ä¸ªæ–‡ä»¶çš„å˜æ›´

---

## ğŸ“‹ æ¯æ—¥å·¥ä½œæµç¨‹

1. **é€‰æ‹©ç›®æ ‡** - ä»å½“å‰é˜¶æ®µé€‰æ‹©ä¸€ä¸ªå°ç›®æ ‡ï¼ˆ1-2 å°æ—¶ï¼‰
2. **åˆ›å»ºåˆ†æ”¯** - `git checkout -b refactor/[category]-[file]`
3. **é‡æ„ä»£ç ** - ä¸“æ³¨äºä¸€ä¸ªæ–‡ä»¶æˆ–ä¸€ç»„ç›¸å…³æ–‡ä»¶
4. **è¿è¡Œæµ‹è¯•** - `npm test`
5. **æ£€æŸ¥ lint** - `npm run lint:grain:report`
6. **æäº¤ä»£ç ** - `git commit -m "refactor: [æè¿°]"`
7. **æ›´æ–°è¿›åº¦** - åœ¨ `progress.md` ä¸­æ ‡è®°å®Œæˆ

---

## ğŸ¯ é‡Œç¨‹ç¢‘

| é‡Œç¨‹ç¢‘ | ç›®æ ‡ | é¢„è®¡å®Œæˆ |
|--------|------|----------|
| M1: å¿«é€Ÿèƒœåˆ© | è§£å†³ check-file + eslint-style + typescript-types (687 ä¸ª) | ç¬¬ 1 å‘¨ |
| M2: ä¸å¯å˜æ€§ 50% | è§£å†³ 1100+ ä¸ªä¸å¯å˜æ€§é—®é¢˜ | ç¬¬ 4 å‘¨ |
| M3: ä¸å¯å˜æ€§ 100% | è§£å†³æ‰€æœ‰ 2209 ä¸ªä¸å¯å˜æ€§é—®é¢˜ | ç¬¬ 7 å‘¨ |
| M4: å‡½æ•°å¼è§„èŒƒ | è§£å†³ grain-functional + functional-no-other-paradigm (703 ä¸ª) | ç¬¬ 10 å‘¨ |
| M5: æ¶æ„é‡æ„ | è§£å†³ grain-architecture (285 ä¸ª) | ç¬¬ 13 å‘¨ |
| M6: å®Œæˆæ¸…ç† | è§£å†³æ‰€æœ‰å‰©ä½™é—®é¢˜ | ç¬¬ 14 å‘¨ |

---

## âš ï¸ é£é™©å’Œç¼“è§£

| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| é‡æ„ç ´ååŠŸèƒ½ | é«˜ | ä¸­ | æ¯æ¬¡é‡æ„åè¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ |
| æ—¶é—´ä¼°ç®—ä¸å‡† | ä¸­ | é«˜ | é‡‡ç”¨è¿­ä»£æ–¹å¼ï¼Œæ¯å‘¨è¯„ä¼°è¿›åº¦ |
| å›¢é˜Ÿæˆå‘˜ä¸ç†Ÿæ‚‰ fp-ts | ä¸­ | ä¸­ | æä¾›åŸ¹è®­æ–‡æ¡£å’Œç¤ºä¾‹ä»£ç  |
| å¤§é‡ merge å†²çª | ä¸­ | ä¸­ | å°æ­¥æäº¤ï¼Œé¢‘ç¹åˆå¹¶ä¸»åˆ†æ”¯ |
| æ€§èƒ½å›é€€ | ä½ | ä½ | ä½¿ç”¨æ€§èƒ½æµ‹è¯•éªŒè¯å…³é”®è·¯å¾„ |

---

## ğŸ“š å‚è€ƒèµ„æº

- [fp-ts å®˜æ–¹æ–‡æ¡£](https://gcanti.github.io/fp-ts/)
- [Immer æ–‡æ¡£](https://immerjs.github.io/immer/)
- [å‡½æ•°å¼ç¼–ç¨‹æœ€ä½³å®è·µ](https://github.com/stoeffel/awesome-fp-js)
- é¡¹ç›®å†…éƒ¨æ–‡æ¡£ï¼š
  - `#data-flow-frontend`
  - `#fp-patterns`
  - `#code-standards`

---

## ğŸ‰ æˆåŠŸæ ‡å‡†

- [ ] æ‰€æœ‰ lint é”™è¯¯é™è‡³ 0
- [ ] æ‰€æœ‰ lint è­¦å‘Šé™è‡³ < 50
- [ ] æµ‹è¯•è¦†ç›–ç‡ä¿æŒ > 80%
- [ ] æ„å»ºæ—¶é—´ä¸å¢åŠ  > 10%
- [ ] è¿è¡Œæ—¶æ€§èƒ½ä¸é™ä½ > 5%
- [ ] ä»£ç åº“ç¬¦åˆ Grain æ¶æ„è§„èŒƒ

---

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¼€å§‹ (ä»Šå¤©)

1. **ä¿®å¤ TypeScript ç±»å‹é—®é¢˜** (1-2 å°æ—¶ï¼Œ5 ä¸ªæäº¤)
   ```bash
   # æŸ¥çœ‹é—®é¢˜
   cat lint-reports/typescript-types.md
   
   # åˆ›å»ºåˆ†æ”¯
   git checkout -b refactor/typescript-types
   
   # ä¿®å¤ç¬¬ 1 ä¸ªæ–‡ä»¶
   # ... ç¼–è¾‘æ–‡ä»¶ ...
   git add <æ–‡ä»¶>
   git commit -m "fix: ä¿®å¤ <æ–‡ä»¶å> çš„ç±»å‹å®‰å…¨é—®é¢˜"
   
   # ä¿®å¤ç¬¬ 2 ä¸ªæ–‡ä»¶
   # ... ç¼–è¾‘æ–‡ä»¶ ...
   git add <æ–‡ä»¶>
   git commit -m "fix: ä¿®å¤ <æ–‡ä»¶å> çš„ç±»å‹å®‰å…¨é—®é¢˜"
   
   # é‡å¤ç›´åˆ° 5 ä¸ªæ–‡ä»¶å…¨éƒ¨å®Œæˆ
   ```

2. **è‡ªåŠ¨ä¿®å¤ä»£ç é£æ ¼** (1-2 å°æ—¶ï¼Œ74 ä¸ªæäº¤)
   ```bash
   # åˆ›å»ºåˆ†æ”¯
   git checkout -b refactor/code-style
   
   # è‡ªåŠ¨ä¿®å¤
   cd apps/desktop
   npx eslint --fix 'src/**/*.{ts,tsx}'
   
   # æŸ¥çœ‹ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨
   git status
   
   # é€ä¸ªæ–‡ä»¶æäº¤
   git add src/path/to/file1.ts
   git commit -m "style: ä¿®å¤ file1.ts çš„ä»£ç é£æ ¼"
   
   git add src/path/to/file2.ts
   git commit -m "style: ä¿®å¤ file2.ts çš„ä»£ç é£æ ¼"
   
   # ... é‡å¤ 74 æ¬¡ ...
   
   # è¿è¡Œæµ‹è¯•
   npm test
   ```

### æœ¬å‘¨ç›®æ ‡ (ç¬¬ 1 å‘¨)

3. **å¼€å§‹æ–‡ä»¶é‡å‘½å** (5-7 å¤©ï¼Œæ¯å¤©çº¦ 70 ä¸ªæäº¤)
   ```bash
   # åˆ†æé—®é¢˜
   cat lint-reports/check-file.md | head -100
   
   # åˆ›å»ºåˆ†æ”¯
   git checkout -b refactor/file-naming-flows
   
   # å¤„ç†ç¬¬ 1 ä¸ªæ–‡ä»¶
   git mv old-name.ts new-name.ts
   # æ›´æ–° importï¼ˆä½¿ç”¨ IDEï¼‰
   git commit -m "refactor: é‡å‘½å old-name.ts ä¸º new-name.ts"
   
   # å¤„ç†ç¬¬ 2 ä¸ªæ–‡ä»¶
   git mv old-name2.ts new-name2.ts
   # æ›´æ–° importï¼ˆä½¿ç”¨ IDEï¼‰
   git commit -m "refactor: é‡å‘½å old-name2.ts ä¸º new-name2.ts"
   
   # é‡å¤... æ¯å¤©å¤„ç† 50-70 ä¸ªæ–‡ä»¶
   
   # æ¯å¤„ç† 10 ä¸ªæ–‡ä»¶è¿è¡Œä¸€æ¬¡æµ‹è¯•
   npm test
   ```

### ä¸‹å‘¨ç›®æ ‡ (ç¬¬ 2 å‘¨)

4. **ç»§ç»­æ–‡ä»¶é‡å‘½å**
   - å®Œæˆ pipes/ ç›®å½•
   - å®Œæˆ hooks/ ç›®å½•
   - å®Œæˆ io/ ç›®å½•

5. **å¼€å§‹ä¸å¯å˜æ€§é‡æ„**
   - ä» utils/ ç›®å½•å¼€å§‹
   - æ¯å¤©å¤„ç† 5-10 ä¸ªæ–‡ä»¶

### æ¯æ—¥å·¥ä½œæµç¨‹

```
å¤„ç†æ¯ä¸ªæ–‡ä»¶çš„æ ‡å‡†æµç¨‹ï¼š

1. é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶
2. æ‰“å¼€æ–‡ä»¶ï¼Œä¿®å¤é—®é¢˜
3. ä¿å­˜æ–‡ä»¶
4. è¿è¡Œæµ‹è¯•ï¼ˆå¦‚æœæ˜¯å…³é”®æ–‡ä»¶ï¼‰
5. ç«‹å³æäº¤ï¼š
   git add <æ–‡ä»¶è·¯å¾„>
   git commit -m "fix/refactor: ä¿®å¤ <æ–‡ä»¶å> çš„ <é—®é¢˜ç±»å‹>"
6. ç»§ç»­ä¸‹ä¸€ä¸ªæ–‡ä»¶

é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œæ¯ä¸ªæ–‡ä»¶ä¸€ä¸ªæäº¤ï¼
```

**æäº¤ä¿¡æ¯æ¨¡æ¿**ï¼š

```bash
# ç±»å‹å®‰å…¨
git commit -m "fix: ä¿®å¤ workspace.api.ts çš„ç±»å‹å®‰å…¨é—®é¢˜"

# ä»£ç é£æ ¼
git commit -m "style: ä¿®å¤ node.pipe.ts çš„ç®­å¤´å‡½æ•°é£æ ¼"

# æ–‡ä»¶é‡å‘½å
git commit -m "refactor: é‡å‘½å backup.flow.ts ä¸º backup-flow.flow.ts"

# ä¸å¯å˜æ€§
git commit -m "refactor: å°† tree.pipe.ts æ”¹ä¸ºä¸å¯å˜æ¨¡å¼"

# æ¶æ„è°ƒæ•´
git commit -m "refactor: ä¿®å¤ node-view.tsx çš„å±‚çº§ä¾èµ–é—®é¢˜"

# ç§»é™¤å‰¯ä½œç”¨
git commit -m "refactor: ç§»é™¤ transform.pipe.ts çš„å‰¯ä½œç”¨"
```

**æ¯å¤©å·¥ä½œèŠ‚å¥**ï¼š

```
ä¸Šåˆ (2-3 å°æ—¶):
- å¤„ç† 10-15 ä¸ªæ–‡ä»¶
- æ¯ä¸ªæ–‡ä»¶ä¸€ä¸ªæäº¤
- é¢„è®¡ 10-15 ä¸ªæäº¤

ä¸‹åˆ (1-2 å°æ—¶):
- ç»§ç»­å¤„ç† 5-10 ä¸ªæ–‡ä»¶
- æ¯ä¸ªæ–‡ä»¶ä¸€ä¸ªæäº¤
- é¢„è®¡ 5-10 ä¸ªæäº¤

æ¯å¤©ç›®æ ‡: 15-25 ä¸ªæ–‡ä»¶ï¼Œ15-25 ä¸ªæäº¤
```
