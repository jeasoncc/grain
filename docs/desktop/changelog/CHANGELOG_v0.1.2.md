# 更新日志 v0.1.2

## 发布日期：2024-12-02

## 🎉 新功能

### 1. 搜索和替换功能

#### 当前文件搜索替换
- ✨ 在编辑器中实时搜索和高亮文本
- 🔄 支持单个替换和批量替换
- 🔤 区分大小写匹配
- 📖 全字匹配模式
- 🔧 正则表达式支持
- ⌨️ 快捷键：`Ctrl/Cmd+F` (搜索), `Ctrl/Cmd+H` (替换)
- 💫 流畅的键盘导航
- 📍 自动滚动到匹配位置

#### 全局搜索（已验证）
- 🔍 跨项目、章节、场景、角色、世界观搜索
- 🎯 关键词高亮和智能排序
- ⌨️ 快捷键：`Ctrl/Cmd+Shift+F`

### 2. 可隐藏书库侧边栏

- 📖 点击按钮或使用快捷键隐藏/显示书库侧边栏
- ⌨️ 快捷键：`Ctrl/Cmd+B`
- 💾 自动保存用户偏好到本地
- 🎨 动态图标和提示文字
- 📐 默认状态：关闭（节省空间）
- 💫 平滑的滑入/滑出动画

## 🔧 改进

### 用户体验
- 更灵活的工作空间布局
- 更大的写作区域（隐藏侧边栏后）
- 更直观的界面控制
- 更好的键盘快捷键支持

### 性能优化
- 搜索功能使用防抖（300ms）
- 高效的文本节点遍历
- 智能的批量替换算法

## 📝 文档

### 搜索功能文档
- `SEARCH_REPLACE_GUIDE.md` - 完整使用指南
- `SEARCH_FEATURE_SUMMARY.md` - 功能实现总结
- `CHANGELOG_SEARCH_FEATURE.md` - 搜索功能更新日志
- `docs/SEARCH_QUICK_REFERENCE.md` - 快速参考卡片
- `docs/SEARCH_GETTING_STARTED.md` - 快速上手指南

### 侧边栏功能文档
- `SIDEBAR_TOGGLE_FEATURE.md` - 完整功能说明
- `SIDEBAR_IMPLEMENTATION_SUMMARY.md` - 实现总结
- `docs/SIDEBAR_QUICK_GUIDE.md` - 快速指南

## 🎯 快捷键总览

| 功能 | Windows/Linux | macOS |
|------|---------------|-------|
| 当前文件搜索 | `Ctrl+F` | `Cmd+F` |
| 当前文件替换 | `Ctrl+H` | `Cmd+H` |
| 全局搜索 | `Ctrl+Shift+F` | `Cmd+Shift+F` |
| 切换侧边栏 | `Ctrl+B` | `Cmd+B` |
| 下一个匹配 | `Enter` | `Enter` |
| 上一个匹配 | `Shift+Enter` | `Shift+Enter` |
| 关闭对话框 | `Esc` | `Esc` |

## 📦 新增文件

### 核心功能
- `src/components/editor/plugins/search-replace-plugin.tsx` - 搜索替换插件

### 测试
- `src/components/editor/plugins/__tests__/search-replace.test.md` - 测试清单

### 文档（共 8 个）
- 搜索功能文档 5 个
- 侧边栏功能文档 3 个

## 🔄 修改的文件

### 搜索功能
- `src/components/blocks/rich-editor/plugins.tsx` - 集成搜索插件
- `README.md` - 更新英文说明
- `README.zh-CN.md` - 更新中文说明

### 侧边栏功能
- `src/routes/__root.tsx` - 添加侧边栏状态管理
- `src/components/activity-bar.tsx` - 添加切换按钮
- `README.md` - 更新英文说明
- `README.zh-CN.md` - 更新中文说明

## 💡 使用示例

### 搜索和替换
```
1. 在编辑器中按 Ctrl+H
2. 搜索: "主角"
3. 替换为: "李明"
4. 点击"全部替换"
```

### 隐藏侧边栏
```
1. 进入一本书籍
2. 按 Ctrl+B 隐藏侧边栏
3. 享受更宽敞的写作空间
```

### 全局搜索
```
1. 按 Ctrl+Shift+F
2. 输入: "决战"
3. 浏览所有相关场景
4. 点击结果跳转
```

## 🐛 修复

- 无

## ⚠️ 已知问题

- 无

## 🚀 未来计划

### 搜索功能
- [ ] 搜索历史记录
- [ ] 保存常用搜索
- [ ] 跨文件批量替换
- [ ] 高级过滤（按日期、标签）

### 侧边栏功能
- [ ] 添加到命令面板
- [ ] 支持拖拽调整宽度
- [ ] 自动隐藏模式
- [ ] 迷你模式

## 📊 统计

- 新增代码：~1200 行
- 新增文件：12 个
- 修改文件：7 个
- 文档页数：8 个
- 开发时间：~3 小时

## 🙏 致谢

感谢所有测试和反馈的用户！

---

## 升级说明

### 从 v0.1.1 升级

1. 拉取最新代码
2. 重新构建应用
3. 首次启动时，侧边栏默认关闭
4. 使用 `Ctrl+B` 可以随时切换

### 注意事项

- 侧边栏状态会自动保存到本地
- 搜索功能首次使用会构建索引
- 所有快捷键都可以在提示中查看

---

**提示**: 这个版本专注于提升写作体验和工作效率，让你可以更专注于创作！
